{% extends "base.html" %}

{% block title %}Server Error - {{ business_name }}{% endblock %}

{% block description %}We're experiencing technical difficulties. Our team is working to resolve the issue. Contact Florida Alignment & Suspension for immediate assistance.{% endblock %}

{% block content %}
<section class="error-section py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <!-- Error Icon -->
                <div class="error-icon mb-4">
                    <i class="fas fa-tools fa-5x text-warning opacity-75"></i>
                </div>
                
                <!-- Error Content -->
                <div class="error-content">
                    <h1 class="display-1 fw-bold text-warning mb-3">500</h1>
                    <h2 class="h3 mb-4">Under the Hood Issues!</h2>
                    <p class="lead text-muted mb-5">
                        Our website is experiencing some technical difficulties, just like a car that needs a tune-up.
                        Our web mechanics are working hard to get everything running smoothly again!
                    </p>
                    
                    <!-- Action Buttons -->
                    <div class="error-actions mb-5">
                        <a href="{{ url_for('main.index') }}" class="btn btn-primary btn-lg me-3 mb-2">
                            <i class="fas fa-refresh me-2"></i>Try Again
                        </a>
                        <a href="tel:{{ business_phone }}" class="btn btn-warning btn-lg me-3 mb-2">
                            <i class="fas fa-phone me-2"></i>Call Us
                        </a>
                        <a href="{{ url_for('main.contact') }}" class="btn btn-outline-primary btn-lg mb-2">
                            <i class="fas fa-envelope me-2"></i>Email Support
                        </a>
                    </div>
                    
                    <!-- Support Info -->
                    <div class="support-info">
                        <h5 class="mb-3">Need Immediate Help?</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <div class="support-item p-3 border rounded">
                                    <i class="fas fa-phone text-primary mb-2 fa-2x"></i>
                                    <h6>Call Us Directly</h6>
                                    <p class="mb-0">
                                        <a href="tel:{{ business_phone }}" class="text-decoration-none">
                                            {{ business_phone }}
                                        </a>
                                    </p>
                                    <small class="text-muted">Available during business hours</small>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <div class="support-item p-3 border rounded">
                                    <i class="fas fa-envelope text-primary mb-2 fa-2x"></i>
                                    <h6>Email Us</h6>
                                    <p class="mb-0">
                                        <a href="mailto:{{ business_email }}" class="text-decoration-none">
                                            {{ business_email }}
                                        </a>
                                    </p>
                                    <small class="text-muted">We'll respond within 24 hours</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Status Info -->
<section class="status-info bg-light py-4">
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <div class="alert alert-info mb-0">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Technical Notice:</strong> We're working to resolve this issue as quickly as possible. 
                    Your automotive service needs are still our priority - please contact us directly for immediate assistance.
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
// Auto-refresh after 30 seconds
setTimeout(function() {
    const refreshBtn = document.createElement('div');
    refreshBtn.innerHTML = `
        <div class="alert alert-warning text-center mt-3">
            <i class="fas fa-clock me-2"></i>
            Page will auto-refresh in <span id="countdown">10</span> seconds.
            <button class="btn btn-sm btn-warning ms-3" onclick="location.reload()">
                <i class="fas fa-refresh me-1"></i>Refresh Now
            </button>
        </div>
    `;
    
    document.querySelector('.error-actions').appendChild(refreshBtn);
    
    let countdown = 10;
    const timer = setInterval(() => {
        countdown--;
        const countdownEl = document.getElementById('countdown');
        if (countdownEl) countdownEl.textContent = countdown;
        
        if (countdown <= 0) {
            clearInterval(timer);
            location.reload();
        }
    }, 1000);
}, 30000);

// Add tool animation
document.addEventListener('DOMContentLoaded', function() {
    const toolIcon = document.querySelector('.error-icon i');
    if (toolIcon) {
        toolIcon.style.animation = 'wrench-turn 3s ease-in-out infinite';
    }
});
</script>

<style>
@keyframes wrench-turn {
    0%, 100% {
        transform: rotate(0deg);
    }
    25% {
        transform: rotate(15deg);
    }
    75% {
        transform: rotate(-15deg);
    }
}

.support-item {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.support-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
</style>
{% endblock %}
