<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>{% block title %}Professional Auto Repair Tampa - {{ business_name }}{% endblock %}</title>
    
    <!-- Meta Description -->
    <meta name="description" content="{% block description %}Professional automotive repair in Tampa, FL. Expert brake service, alignments, suspension work, DOT inspections, and general mechanical repairs. Call {{ business_phone }}.{% endblock %}">
    
    <!-- Keywords -->
    <meta name="keywords" content="auto repair Tampa, brake service, wheel alignment, suspension repair, DOT inspection, automotive maintenance, car repair Florida">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="{% block og_title %}{{ self.title() }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ self.description() }}{% endblock %}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:site_name" content="{{ business_name }}">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ self.title() }}">
    <meta name="twitter:description" content="{{ self.description() }}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='icons/favicon.ico') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='icons/apple-touch-icon.png') }}">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ request.url }}">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&family=Roboto+Slab:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    
    <!-- Google Analytics 4 -->
    {% if config.get('GOOGLE_ANALYTICS_ID') %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ config.GOOGLE_ANALYTICS_ID }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '{{ config.GOOGLE_ANALYTICS_ID }}', {
        page_title: document.title,
        page_location: window.location.href,
        cookie_flags: 'SameSite=Strict;Secure'
      });
      
      // Enhanced ecommerce for lead tracking
      gtag('event', 'page_view', {
        page_title: document.title,
        page_location: window.location.href,
        content_group1: 'Auto Repair',
        content_group2: 'Tampa FL'
      });
    </script>
    {% endif %}
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "AutoRepair",
        "name": "{{ business_name }}",
        "image": "{{ url_for('static', filename='img/logo.png', _external=True) }}",
        "@id": "{{ url_for('main.index', _external=True) }}",
        "url": "{{ url_for('main.index', _external=True) }}",
        "telephone": "{{ business_phone }}",
        "openingHoursSpecification": {
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": [
                "Monday",
                "Tuesday",
                "Wednesday",
                "Thursday",
                "Friday"
            ],
            "opens": "08:00",
            "closes": "17:00"
        },
        "sameAs": [
            "https://www.facebook.com/floridaalignment",
            "https://www.google.com/maps/place/florida+alignment"
        ]
    }
    </script>
    
    {% block head %}{% endblock %}
</head>
<body>
    <!-- Skip Navigation Link -->
    <a class="skip-link sr-only sr-only-focusable" href="#main-content">
        Skip to main content
    </a>
    
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top shadow" role="navigation" aria-label="Main navigation">
        <div class="container">
            <a class="navbar-brand fw-bold d-flex align-items-center" href="{{ url_for('main.index') }}" aria-label="{{ business_name }} - Home">
                <i class="fas fa-wrench me-2 text-warning" aria-hidden="true"></i>
                <span class="d-none d-sm-inline">{{ business_name }}</span>
                <span class="d-sm-none">FL Alignment</span>
            </a>
            
            <!-- Quick Call Button (Mobile) -->
            <div class="d-lg-none">
                <a href="tel:{{ business_phone }}" class="btn btn-warning btn-sm me-2" aria-label="Call {{ business_phone }}">
                    <i class="fas fa-phone" aria-hidden="true"></i>
                    <span class="sr-only">Call us</span>
                </a>
            </div>
            
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation menu">
                <span class="navbar-toggler-icon"></span>
                <span class="sr-only">Menu</span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-lg-center">
                    <li class="nav-item">
                        <a class="nav-link {{ 'active' if request.endpoint == 'main.index' else '' }}" href="{{ url_for('main.index') }}" {{ 'aria-current="page"' if request.endpoint == 'main.index' else '' }}>
                            <i class="fas fa-home d-lg-none me-2" aria-hidden="true"></i>Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {{ 'active' if request.endpoint == 'main.services' else '' }}" href="{{ url_for('main.services') }}" {{ 'aria-current="page"' if request.endpoint == 'main.services' else '' }}>
                            <i class="fas fa-wrench d-lg-none me-2" aria-hidden="true"></i>Services
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {{ 'active' if request.endpoint == 'main.about' else '' }}" href="{{ url_for('main.about') }}" {{ 'aria-current="page"' if request.endpoint == 'main.about' else '' }}>
                            <i class="fas fa-info-circle d-lg-none me-2" aria-hidden="true"></i>About
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {{ 'active' if request.endpoint == 'main.contact' else '' }}" href="{{ url_for('main.contact') }}" {{ 'aria-current="page"' if request.endpoint == 'main.contact' else '' }}>
                            <i class="fas fa-comment d-lg-none me-2" aria-hidden="true"></i>Contact
                        </a>
                    </li>
                    
                    <!-- Desktop CTA Buttons -->
                    <li class="nav-item d-none d-lg-block ms-3">
                        <a class="btn btn-outline-light btn-sm me-2" href="{{ url_for('main.contact') }}">
                            <i class="fas fa-comment me-1"></i>Get Quote
                        </a>
                    </li>
                    <li class="nav-item d-none d-lg-block">
                        <a class="btn btn-warning btn-sm" href="tel:{{ business_phone }}">
                            <i class="fas fa-phone me-1"></i>{{ business_phone }}
                        </a>
                    </li>
                    
                    <!-- Mobile CTA Buttons -->
                    <li class="nav-item d-lg-none mt-2">
                        <div class="d-grid gap-2">
                            <a class="btn btn-warning" href="{{ url_for('main.contact') }}">
                                <i class="fas fa-comment me-2"></i>Get Free Quote
                            </a>
                            <a class="btn btn-outline-light" href="tel:{{ business_phone }}">
                                <i class="fas fa-phone me-2"></i>Call {{ business_phone }}
                            </a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container mt-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <main id="main-content" role="main" aria-label="Main content">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-light py-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <h5>{{ business_name }}</h5>
                    <p>Professional automotive repair and maintenance services you can trust.</p>
                </div>
                <div class="col-lg-4">
                    <h5>Contact Info</h5>
                    <p><i class="fas fa-phone"></i> {{ business_phone }}</p>
                    <p><i class="fas fa-envelope"></i> {{ business_email }}</p>
                </div>
                <div class="col-lg-4">
                    <h5>Services</h5>
                    <ul class="list-unstyled">
                        <li>General Mechanical Repairs</li>
                        <li>Brake Service & Repairs</li>
                        <li>DOT Inspections</li>
                        <li>Alignments & Suspension</li>
                    </ul>
                </div>
            </div>
            <hr>
            <div class="text-center">
                <p>&copy; {{ current_year }} {{ business_name }}. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
    {% block scripts %}{% endblock %}
</body>
</html>